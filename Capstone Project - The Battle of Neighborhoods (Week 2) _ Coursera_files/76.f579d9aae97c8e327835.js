(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{"04NU":function(module,exports,e){var t=e("xqV8"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},s=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"1G4o":function(module,e,t){"use strict";var i=t("q1tI"),r=t.n(i),s=t("eJMc"),n=t.n(s),a=t("BVC1"),o=t("yhVA"),u=t.n(o),c=function AssignmentSubmitBeforeReviewWarning(e){var t=e.computedItem,i={padding:16,margin:"12px 0px"};return r.a.createElement("div",{className:"rc-AssignmentSubmitBeforeReviewWarning"},r.a.createElement("div",{className:"bgcolor-warn-light color-warn-dark",style:i},u()("Submit your project before reviewing classmates.")),r.a.createElement("div",{className:"vertical-box align-items-vertical-center"},r.a.createElement(n.a,{to:a.a.join(t.resourcePath,"submit"),className:"link-button primary"},u()("Go to my project"))))};e.a=c},"46g2":function(module,e,t){"use strict";var i=t("VbXa"),r=t.n(i),s=t("q1tI"),n=t.n(s),a=t("eJMc"),o=t.n(a),u=t("kWps"),c=t("kvW3"),m=t("NXYo"),d=t("Zz7k"),l=t("hbUA"),v=t("yhVA"),b=t.n(v),S=function(e){function GiveFeedbackNoList(){return e.apply(this,arguments)||this}r()(GiveFeedbackNoList,e);var t=GiveFeedbackNoList.prototype;return t.renderMentorGradedMessage=function renderMentorGradedMessage(){return n.a.createElement("div",{className:"rc-GiveFeedbackNoList"},n.a.createElement("div",{className:"c-peer-card"},n.a.createElement("p",null,b()("All grading for this assignment will be done by course mentors."))),n.a.createElement(m.a,{requestedCapability:d.e.viewSubmissionList},this.props.isSubmissionAvailableForReview?this.renderWithAvailableSubmissions():this.renderWithoutAvailableSubmissions()))},t.renderWithAvailableSubmissions=function renderWithAvailableSubmissions(){var e=this.props,t=e.computedItem,i=e.reviewNextLink;return n.a.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},n.a.createElement("div",{className:"body-2-text"},b()("Ready to review your classmates?")),n.a.createElement("p",null,b()("\n            Reviewing another person's work is a valuable way to learn and providing quality feedback is a useful skill\n            to master. Here are some tips to help you provide the most helpful, accurate, and consistent feedback\n            possible:\n          ")),n.a.createElement("ul",null,n.a.createElement("li",null,b()("\n              Remember, English isn't everyone's native language. Focus primarily on how well the work meets the\n              grading criteria.\n            ")),n.a.createElement("li",null,b()("\n              When writing critical feedback, use a constructive and polite tone.\n            "))),n.a.createElement("p",null,n.a.createElement(c.b,{message:b()("\n              Everyone enrolled in the course must review at least\n              {requiredReviewCount, plural, one{# other submission} other{# other submissions}} to ensure everyone\n              receives a grade; however, many learners complete more to help their classmates who are still waiting.\n              Ready to get started?\n            "),requiredReviewCount:t.requiredReviewCount})),n.a.createElement(o.a,{className:"link-button primary","data-js":"open-course-link",to:i},b()("Start Reviewing")))},t.renderWithoutAvailableSubmissions=function renderWithoutAvailableSubmissions(){var e=this.props,t=e.displayablePhaseSchedule,i=e.computedItem,r=t&&"submit"===t.currentPhase&&t.phaseStarts.review,s=r&&u.a.getFormattedDeadline(r);return s&&i.isPeerAssignmentReviewComplete?n.a.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},n.a.createElement("div",{className:"body-2-text"},b()("No Submissions Available")),n.a.createElement("div",null,n.a.createElement(c.b,{message:b()("\n                There are no submissions available for you to review right now. We'll send you an email when\n                classmates' submissions are available to review. Classmates' submissions will be available to review by\n                {reviewsAvailableTime}.\n              "),reviewsAvailableTime:n.a.createElement("span",{className:"body-2-text"},s)}))):n.a.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},n.a.createElement("div",{className:"body-2-text"},b()("No Submissions Available")),n.a.createElement("div",null,b()("\n              There are no submissions available for you to review right now. Come back later if you want to review\n              more classmates' submissions!\n            ")))},t.render=function render(){var e=this.props,t=e.isSubmissionAvailableForReview,i=e.computedItem;return Object(l.q)(i)?this.renderMentorGradedMessage():t?this.renderWithAvailableSubmissions():this.renderWithoutAvailableSubmissions()},GiveFeedbackNoList}(n.a.Component);e.a=S},EGkx:function(module,exports,e){},Ef0b:function(module,e,t){"use strict";t.d(e,"b",function(){return I}),t.d(e,"a",function(){return E}),t.d(e,"c",function(){return y});var i=t("wiyT"),r=t.n(i),s=t("F/us"),n=t.n(s),a=t("bPpC"),o=t("uPmI"),u=t("Q3zy"),c=t("o/MR"),m=t("beWW"),d=t("nLAy"),l=t("Hk9X"),v=t("fAMf"),b=t("E4RX"),S=t("StP4"),f=t("Nher"),h=t("uhR6"),p=function loadAssignment(e,t){var i=t.userId,r=t.courseId,s=t.itemId;return e.dispatch(h.a.LOADING_PEER_ASSIGNMENT),Object(c.a)({userId:i,courseId:r,itemId:s}).then(function(t){return e.dispatch(h.a.LOADED_PEER_ASSIGNMENT,{assignment:Object(l.a)(t),loadedItemId:s}),t})},w=function loadPermissionsAndProgresses(e,t){var i=t.userId,r=t.courseId,s=t.itemId;return e.dispatch(h.a.LOADING_PEER_USER_PERMISSIONS),Object(o.a)(i,r,s).then(function(t){e.dispatch(h.a.LOADED_DISPLAYABLE_PHASE_SCHEDULE,{displayablePhaseSchedule:t.displayablePhaseSchedules});var i=n()(t.assignmentPermissions).chain().pick(function(e){return e.isAllowed}).keys().value();return e.dispatch(h.a.LOADED_PEER_USER_PERMISSIONS,{capabilities:i,capabilitiesWithReasons:t.assignmentPermissions,receivedReviewProgresses:t.receivedReviewProgresses,submissionProgresses:t.submissionProgresses}),t})},g=function loadSubmissionDraft(e,t){var i=t.userId,s=t.courseId,n=t.itemId,a=t.permissionsAndProgresses,o=t.submissionSchema,c=t.reviewSchema;return e.dispatch(h.a.PEER_SUBMISSION_DRAFT_LOADING),null==a.submissionProgresses.latestDraftSummary?r()(Object(l.g)(o,c,i)).then(function(t){return e.dispatch(h.a.LOADED_PEER_SUBMISSION_DRAFT,{naptimeSubmissionSchema:o,naptimeSubmission:Object(v.a)(o.submissionSchema,i),latestSubmissionAndRelated:t})}):Object(u.b)({userId:i,courseId:s,itemId:n}).then(function(t){var i=Object(l.d)(t);return e.dispatch(h.a.LOADED_PEER_SUBMISSION_DRAFT,{naptimeSubmission:t.submission,naptimeSubmissionSchema:o,latestSubmissionAndRelated:i})})},P=function loadLatestSubmission(e,t){var i=t.userId,s=t.courseId,n=t.itemId,a=t.permissionsAndProgresses,o=t.submissionSchema,u=t.reviewSchema,c=t.shouldLoadOwnPeerViewSubmission;return null==a.submissionProgresses.latestSubmissionSummary?g(e,{userId:i,courseId:s,itemId:n,permissionsAndProgresses:a,submissionSchema:o,reviewSchema:u}):c?Object(d.d)(e,{userId:i,courseId:s,itemId:n,submissionId:a.submissionProgresses.latestSubmissionSummary.computed.id}):r()()},I=function loadReviewQueue(e,t){var i=t.userId,r=t.itemId,s=t.courseId,n=t.limit,a=t.start;return e.dispatch(h.a.REVIEW_QUEUE_LOADING),Object(m.a)({userId:i,courseId:s,itemId:r,start:a,limit:n}).then(function(e){return Object(l.b)(e)}).then(function(t){e.dispatch(h.a.REVIEW_QUEUE_LOADED,{data:t,itemId:r})}).catch(function(t){if(403!==t.status)throw t;e.dispatch(h.a.REVIEW_QUEUE_ERROR,{errorType:"mustSubmitBeforeReviewing"})})},E=function loadInitialPeerData(e,t){var i=t.userId,s=t.courseId,n=t.itemId,o=t.forceRefresh,u=t.shouldLoadOwnPeerViewSubmission,c=e.getStore(a.a).getState(),m="loaded"===c.loadState,d=n!==c.loadedItemId;if(!o&&m&&!d)return r()({});return r.a.all([w(e,{userId:i,courseId:s,itemId:n}),p(e,{userId:i,courseId:s,itemId:n})]).spread(function(t,r){return P(e,{userId:i,courseId:s,itemId:n,permissionsAndProgresses:t,submissionSchema:r.linked["onDemandPeerSubmissionSchemas.v1"][0],reviewSchema:r.linked["onDemandPeerReviewSchemas.v1"][0],shouldLoadOwnPeerViewSubmission:u})})},y=function refreshSubmissionAndProgress(e,t){var i=t.userId,r=t.courseId,s=t.courseSlug,n=t.itemId;return E(e,{userId:i,courseId:r,itemId:n,forceRefresh:!0,shouldLoadOwnPeerViewSubmission:!0}).then(function(){return e.executeAction(b.a,{courseId:r,itemId:n,forceRefresh:!0,shouldLoadOwnPeerViewSubmission:!0}).then(function(){return Promise.all([e.executeAction(b.a,{courseId:r,refreshProgress:!0}),e.executeAction(f.b,{courseId:r}),e.executeAction(S.b,{courseSlug:s,refetch:!0})])})})}},GQaP:function(module,e,t){"use strict";var i=t("q1tI"),r=t.n(i),s=t("EqTq"),n=t("m10x"),a=t("kvW3"),o=t("wd/R"),u=t.n(o),c=t("ca6j"),m=t("yhVA"),d=t.n(m),l=t("af/C"),v=t.n(l),b=Object(s.a)("NextUpSubmissionTile"),S=function NextUpSubmissionTile(e){var t=e.submissionSummary,i=e.itemResourcePath,s=t.title,o=t.creator,m=t.createdAt,l,v=i+"/review/"+t.id;return r.a.createElement("a",{href:v,className:b(void 0,void 0,"nostyle")},r.a.createElement("div",{className:b("needs-review-banner")},d()("Needs review")),r.a.createElement("div",{className:b("header",void 0,"headline-4-text")},s),r.a.createElement("div",{className:b("footer")},r.a.createElement("div",{className:b("profile-image-container")},r.a.createElement(c.a,{profile:o,size:40})),r.a.createElement("div",{className:b("name-and-time-container")},r.a.createElement(n.i,{rootClassName:b("full-name")},o.fullName),r.a.createElement("div",{className:b("submission-time")},r.a.createElement(a.b,{message:d()("Submitted {submissionTime}"),submissionTime:u()(m).fromNow()})))))};e.a=S},HCVm:function(module,e,t){"use strict";var i=t("q1tI"),r=t.n(i),s=t("EqTq"),n=t("wd/R"),a=t.n(n),o=t("ca6j"),u=t("rg2u"),c=t.n(u),m=Object(s.a)("SubmissionTile"),d=function SubmissionTile(e){var t=e.submissionSummary,i=e.itemResourcePath,s=t.title,n=t.creator,u=t.createdAt,c,d=i+"/review/"+t.id;return r.a.createElement("div",{className:m()},r.a.createElement("a",{href:d,className:m("link-container",void 0,"nostyle")},r.a.createElement("div",{className:m("header")},r.a.createElement("div",{className:m("submission-time")},a()(u).fromNow()),r.a.createElement("div",{className:m("title",void 0,"headline-1-text")},s)),r.a.createElement("div",{className:m("footer")},r.a.createElement("div",{className:m("profile-image-container")},r.a.createElement(o.a,{profile:n,size:30})),r.a.createElement("div",{className:m("name-and-time-container")},r.a.createElement("div",{className:m("full-name")},n.fullName)))))};e.a=d},Ncer:function(module,exports,e){},O7iK:function(module,exports){function fromPairs(e){for(var t=-1,i=null==e?0:e.length,r={};++t<i;){var s=e[t];r[s[0]]=s[1]}return r}module.exports=fromPairs},Q3zy:function(module,e,t){"use strict";t.d(e,"b",function(){return l}),t.d(e,"c",function(){return v}),t.d(e,"a",function(){return b});var i=t("lSNA"),r=t.n(i),s=t("wiyT"),n=t.n(s),a=t("fw5G"),o=t.n(a),u=t("DnuM");function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){r()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var c=Object(u.a)("/api/onDemandPeerSubmissionDrafts.v1",{type:"rest"}),m=["submission","context","creatorId","attachedAssignmentId","createdAt","upgradeSubmissionToLatestAssignment","blocksSubmit","validationErrors","onDemandPeerReviewSchemas.v1(reviewSchema)","onDemandPeerSubmissionSchemas.v1(submissionSchema)"],d=["reviewSchemas","submissionSchemas"];function responseHandler(e){if(e.elements&&e.elements.length){var t=e.linked["onDemandPeerSubmissionSchemas.v1"]&&e.linked["onDemandPeerSubmissionSchemas.v1"].length&&e.linked["onDemandPeerSubmissionSchemas.v1"][0],i=e.linked["onDemandPeerReviewSchemas.v1"]&&e.linked["onDemandPeerReviewSchemas.v1"].length&&e.linked["onDemandPeerReviewSchemas.v1"][0];if(null==t)throw new Error("No linked submission schema in onDemandPeerSubmissionDraftsApi");return _objectSpread(_objectSpread({},e.elements[0]),{},{reviewSchema:i,submissionSchema:t})}throw new Error("No elements received in onDemandPeerSubmissionDraftsApi")}var l=function getSubmissionDraft(e){var t=e.userId,i=e.courseId,r=e.itemId,s="".concat(t,"~").concat(i,"~").concat(r),a=new o.a(s).addQueryParam("fields",m.join(",")).addQueryParam("includes",d.join(","));return n()(c.get(a.toString())).then(responseHandler)},v=function updateSubmissionDraft(e){var t=e.userId,i=e.courseId,r=e.itemId,s=e.submissionDraftUpdate,a="".concat(t,"~").concat(i,"~").concat(r),u=new o.a(a).addQueryParam("fields",m.join(",")).addQueryParam("includes",d.join(","));return n()(c.put(u.toString(),{data:s})).then(responseHandler)},b=function forceUpgradedSubmissionDraft(e){var t=e.userId,i=e.courseId,r=e.itemId,s=e.forceUpgradeToAssignmentId,a="".concat(t,"~").concat(i,"~").concat(r),u=(new o.a).addQueryParam("action","forceUpgradedDraft").addQueryParam("id",a).addQueryParam("forceUpgradeToAssignmentId",s).addQueryParam("fields",m.join(",")).addQueryParam("includes",d.join(","));return n()(c.post(u.toString())).then(function(e){return e[0]})}},QvzW:function(module,e,t){"use strict";t.r(e);var i=t("VbXa"),r=t.n(i),s=t("17x9"),n=t.n(s),a=t("q1tI"),o=t.n(a),u=t("8cuT"),c=t.n(u),m=t("F/us"),d=t.n(m),l=t("L1vm"),v=t("dAof"),b=t("jsrg"),S=t("BVC1"),f=t("46g2"),h=t("1G4o"),p=t("VMeS"),w=t("e/s0"),g=t("h3AF"),P=t("Ef0b"),I=t("sQ/U"),E=t("yhVA"),y=t.n(E),R=t("04NU"),N=t.n(R),A=function(e){function PeerItemGiveFeedback(){return e.apply(this,arguments)||this}r()(PeerItemGiveFeedback,e);var t=PeerItemGiveFeedback.prototype;return t.renderGiveFeedbackView=function renderGiveFeedbackView(){var e=this.props,t=e.submissionSummariesCollection,i=e.computedItem,r=e.submissionSummaries;if(!t||!r)return null;return o.a.createElement(g.a,{computedItem:i,submissionSummaries:r})},t.renderGiveFeedbackNoListView=function renderGiveFeedbackNoListView(){var e=this.props,t=e.computedItem,i=e.submissionSummariesCollection,r=e.itemProgress,s=e.displayablePhaseSchedule;if(!i)return null;var n=i.length>0,a=S.a.join(t.resourcePath,"review-next");if(r)return o.a.createElement(f.a,{computedItem:t,isSubmissionAvailableForReview:n,reviewNextLink:a,displayablePhaseSchedule:s,itemProgress:r});return null},t.renderSubmitWarning=function renderSubmitWarning(){return o.a.createElement(h.a,{computedItem:this.props.computedItem})},t.renderErrorState=function renderErrorState(e){if("mustSubmitBeforeReviewing"===e)return this.renderSubmitWarning();return o.a.createElement("div",{className:"rc-PeerItemGiveFeedback"},y()("An unknown error has occurred. Please refresh and try again."))},t.render=function render(){var e=this.props,t=e.assignment,i=e.capabilities,r=e.error;if(null!=r)return this.renderErrorState(r);var s=t&&t.definition&&t.definition.closureType;return d()(i).contains("reviewPeers")&&d()(i).contains("listSubmissions")?this.renderGiveFeedbackView():d()(i).contains("reviewPeers")&&!d()(i).contains("listSubmissions")?this.renderGiveFeedbackNoListView():null==s?this.renderSubmitWarning():null},PeerItemGiveFeedback}(o.a.Component);A.contextTypes={executeAction:n.a.func.isRequired};var D=d.a.compose(l.a.createTrackedContainer(function(){return{namespace:{page:"peer_review_review_peers"}}}),c()(["PeerAssignmentStore","PeerPermissionsAndProgressesStore","PeerReviewQueueStore","DisplayablePhaseScheduleStore","ProgressStore"],function(e,t){var i=e.PeerAssignmentStore,r=e.PeerPermissionsAndProgressesStore,s=e.PeerReviewQueueStore,n=e.DisplayablePhaseScheduleStore,a=e.ProgressStore,o,u,c=s.getState(),m=c.loaded,l=c.loadState,v=c.submissions,b=c.errorType,S=c.itemId;if(m)if("loaded"===l&&t.computedItem.id===S){var f=v;o=new w.a(f,{parse:!0,metadata:t.itemMetadata})}else"loadError"===l&&(u=b);var h=r.getState(),p=h.capabilities,g=h.isSubmitted;return{assignment:i.getState().assignment,capabilities:p,isSubmitted:g,submissionSummariesCollection:o,submissionSummaries:null==v?void 0:v.submissionSummaries,error:u,displayablePhaseSchedule:n.getState().displayablePhaseSchedule,itemProgress:a.courseProgress.getItemProgress(t.computedItem.id),hasLoadedPermissions:"loaded"===r.getState().loadState,canReviewPeers:d()(p).contains("reviewPeers"),canListSubmissions:d()(p).contains("listSubmissions")}}),Object(b.a)(function(e){return e.hasLoadedPermissions},o.a.createElement(p.a,{className:"rc-PeerItemGiveFeedback"})),Object(v.a)(function(e,t){var i=t.canListSubmissions,r=t.canReviewPeers,s=t.computedItem,n=t.courseId;if(r){var a=i?20:1,o=0;e.executeAction(P.b,{userId:I.a.get().id,itemId:s.id,courseId:n,start:0,limit:a})}}))(A);e.default=D},Rhu7:function(module,exports,e){var t=e("EGkx"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},s=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},UTav:function(module,e,t){"use strict";t.d(e,"a",function(){return d});var i=t("wiyT"),r=t.n(i),s=t("fw5G"),n=t.n(s),a=t("DnuM"),o=Object(a.a)("/api/onDemandPeerAuthoredReviewSummaries.v1",{type:"rest"}),u=["submissionId","isMentorReview","creatorId","createdAt"],c=["userId","externalUserId","fullName","photoUrl","courseRole","isSuperuser"],m=["summary","computed"],d=function getReviewedSubmissions(e){var t=e.userId,i=e.courseId,s=e.itemId,a=(new n.a).addQueryParam("userId",t.toString()).addQueryParam("courseId",i).addQueryParam("itemId",s).addQueryParam("q","byItem").addQueryParam("includes",["submissionSummaries","onDemandPeerSubmissionSummaries.v2(profiles)"].join(",")).addQueryParam("fields",[u.join(","),"onDemandPeerSubmissionSummaries.v2(".concat(m.join(","),")"),"onDemandSocialProfiles.v1(".concat(c.join(","),")")].join(","));return r()(o.get(a.toString()))}},"af/C":function(module,exports,e){var t=e("xGpl"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},s=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"e/s0":function(module,e,t){"use strict";var i=t("F/us"),r=t.n(i),s=t("welz"),n=t.n(s),a=t("u/HZ"),o=n.a.Collection.extend({model:a.a,initialize:function initialize(e,t){this.metadata=t.metadata},getItemLink:function getItemLink(){return this.metadata.getBaseLink()},parse:function parse(e,t){var i;return r()(e.submissionSummaries).map(function(t){var i=r()(e.userProfiles).findWhere({userId:t.creatorId});return r()(t).extend({creator:i})})}});e.a=o},fAMf:function(module,e,t){"use strict";var i=t("3WF5"),r=t.n(i),s=t("O7iK"),n=t.n(s),a=t("WQ4j"),o=function initializeSubmissionFromSchema(e,t,i){var s;return{title:"",parts:n()(r()(e.parts,function(e){var t=e.id,r=e.details;return[t,Object(a.a)(r.typeName,i)]})),invalidParts:{},isDraft:!0,submittedBy:t,submittedAt:Date.now(),id:""}};e.a=o},h3AF:function(module,e,t){"use strict";var i=t("VbXa"),r=t.n(i),s=t("lSNA"),n=t.n(s),a=t("q1tI"),o=t.n(a),u=t("EqTq"),c=t("yhVA"),m=t.n(c),d=t("GQaP"),l=t("beWW"),v=t("UTav"),b=t("Hk9X"),S=t("HCVm"),f=t("cO+T"),h=t("sQ/U"),p=t("Rhu7"),w=t.n(p);function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){n()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var g=Object(u.a)("ListFeedbackView"),P={LOADING:"LOADING",LOAD_ERROR:"LOAD_ERROR",READY:"READY"},I=function getNetworkStatusString(e){var t;return{LOADING:m()("Loading..."),LOAD_ERROR:m()("Load error!")}[e]},E={REVIEWED:"REVIEWED",NOT_REVIEWED:"NOT_REVIEWED"},y=function getFilterOptions(){return[{label:m()("Projects I have reviewed"),value:E.REVIEWED},{label:m()("Projects I have not reviewed"),value:E.NOT_REVIEWED}]},R=function getSubmissionSummaryWithProfile(e,t){var i=t.reduce(function(e,t){return _objectSpread(_objectSpread({},e),{},n()({},t.userId,t))},{});return e.map(function(e){return _objectSpread(_objectSpread({},e),{},{creator:i[e.creatorId]})})},N=function(e){function ListFeedbackView(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).state={filter:E.NOT_REVIEWED,reviewedSubmissionSummaries:[],notReviewedSubmissionSummaries:[],networkState:P.READY},t.onFilterChange=function(e){t.setState({filter:e.value})},t.onReviewedSubmissionsFetchSuccess=function(e){var i=Object(b.c)(e);t.setState({reviewedSubmissionSummaries:R(i.submissionSummaries,i.userProfiles),networkState:P.READY})},t.onNotReviewedSubmissionsFetchSuccess=function(e){var i=Object(b.b)(e);t.setState({notReviewedSubmissionSummaries:R(i.submissionSummaries,i.userProfiles),networkState:P.READY})},t.onFetchError=function(){t.setState({networkState:P.LOAD_ERROR})},t.getSubmissionSummariesForDisplay=function(){var e=t.getNextUpSubmissionThatNeedReviews(),i=t.state,r=i.filter,s=i.reviewedSubmissionSummaries,n=i.notReviewedSubmissionSummaries;if(r===E.NOT_REVIEWED)return n.filter(function(t){return t.id!==(null==e?void 0:e.id)});return s},t.getNextUpSubmissionThatNeedReviews=function(){var e;return t.props.submissionSummaries.filter(function(e){return!e.reviewTargetReached})[0]},t.fetchReviewedSubmissions=function(){var e=t.props.computedItem;return t.setState({networkState:P.LOADING,reviewedSubmissionSummaries:[]}),Object(v.a)({userId:h.a.get().id,courseId:e.courseId,itemId:e.id}).then(t.onReviewedSubmissionsFetchSuccess).catch(t.onFetchError)},t.fetchNotReviewedSubmissions=function(){var e=t.props.computedItem;return t.setState({networkState:P.LOADING,notReviewedSubmissionSummaries:[]}),Object(l.a)({userId:h.a.get().id,courseId:e.courseId,itemId:e.id}).then(t.onNotReviewedSubmissionsFetchSuccess).catch(t.onFetchError)},t}r()(ListFeedbackView,e);var t=ListFeedbackView.prototype;return t.componentDidMount=function componentDidMount(){this.fetchNotReviewedSubmissions()},t.componentDidUpdate=function componentDidUpdate(_,e){var t=this.state.filter;e.filter!==t&&(t===E.NOT_REVIEWED?this.fetchNotReviewedSubmissions():this.fetchReviewedSubmissions())},t.render=function render(){var e=this.props.computedItem,t=this.state,i=t.filter,r=t.networkState,s=this.getNextUpSubmissionThatNeedReviews(),n=this.getSubmissionSummariesForDisplay();return o.a.createElement("div",{className:g()},0===n.length&&o.a.createElement("div",null,m()("There are no submissions left for you to review. Please check again later!")),!s&&0!==n.length&&o.a.createElement("div",null,m()("You have reviewed all ungraded submissions. You may review graded submissions, but the authors will not receive your reviews, and your reviews will not count towards their grade. If possible, please check later for new submissions to review.")),s&&o.a.createElement(d.a,{itemResourcePath:e.resourcePath,submissionSummary:s}),o.a.createElement("div",{className:g("filter")},o.a.createElement("div",{className:g("filter-label",void 0,"color-secondary-text")},m()("Filter:")),o.a.createElement("div",{className:g("filter-select")},o.a.createElement(f.a,{options:y(),value:i,optionHeight:30,onChange:this.onFilterChange}))),o.a.createElement("div",{className:g("submissions-container")},r!==P.READY&&o.a.createElement("p",null,I(r)),0===n.length&&r===P.READY&&o.a.createElement("div",null,m()("There are no submissions in this list.")),n.map(function(t){return o.a.createElement(S.a,{key:t.id,itemResourcePath:e.resourcePath,submissionSummary:t})})))},ListFeedbackView}(o.a.Component);e.a=N},"o/MR":function(module,e,t){"use strict";t.d(e,"a",function(){return m});var i=t("wiyT"),r=t.n(i),s=t("fw5G"),n=t.n(s),a=t("DnuM"),o=Object(a.a)("/api/onDemandPeerAssignmentInstructions.v1",{type:"rest"}),u=["instructions"],c=["requiredAuthoredReviewCount","isMentorGraded","assignmentDetails"],m=function getAssignment(e){var t=e.userId,i=e.courseId,s=e.itemId,a=(new n.a).addQueryParam("q","latest").addQueryParam("userId",t.toString()).addQueryParam("courseId",i).addQueryParam("itemId",s).addQueryParam("includes",["gradingMetadata","reviewSchemas","submissionSchemas"].join(",")).addQueryParam("fields",[u,"onDemandPeerAssignmentGradingMetadata.v1(".concat(c.join(","),")"),"onDemandPeerReviewSchemas.v1(reviewSchema)","onDemandPeerSubmissionSchemas.v1(submissionSchema)"].join(","));return r()(o.get(a.toString()))}},rg2u:function(module,exports,e){var t=e("Ncer"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},s=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"u/HZ":function(module,e,t){"use strict";var i=t("/VA5"),r=t.n(i),s=t("wd/R"),n=t.n(s),a=t("BVC1"),o=t("cO1z"),u=t("15pW"),c=t("Wgn2"),m=r.a.AssociatedModel.extend({relations:[{type:r.a.One,key:"creator",relatedModel:c.a}],getReviewLink:function getReviewLink(){return a.a.join(this.collection.getItemLink(),"review",this.get("id"))},getTimestampString:function getTimestampString(){return this.timestampString=n()(this.get("createdAt")).fromNow()},getUserName:function getUserName(){return this.get("creator.fullName")},getUserPhoto:function getUserPhoto(){return this.get("creator.photoUrl")},getTruncatedTitle:function getTruncatedTitle(){return o.a.byLength(this.get("title"),u.d.gallery.maxTitleLength)}});e.a=m},uPmI:function(module,e,t){"use strict";t.d(e,"a",function(){return p});var i=t("wiyT"),r=t.n(i),s=t("F/us"),n=t.n(s),a=t("fw5G"),o=t.n(a),u=t("DnuM"),c=Object(u.a)("/api/onDemandPeerAssignmentPermissions.v1",{type:"rest"}),m="onDemandPeerSubmissionProgresses.v1",d="onDemandPeerReceivedReviewProgresses.v1",l="onDemandPeerDisplayablePhaseSchedules.v1",v=["latestSubmissionSummary","latestDraftSummary"],b=["evaluationIfReady","earliestCompletionTime","reviewCount","defaultReceivedReviewRequiredCount"],S=["currentPhase","phaseEnds","phaseStarts"],f=["deleteSubmission","listSubmissions","reviewPeers","viewReviewSchema","anonymousPeerReview","".concat(m,"(").concat(v.join(","),")"),"".concat(d,"(").concat(b.join(","),")"),"".concat(l,"(").concat(S.join(","),")")],h=["receivedReviewsProgress","submissionProgress","phaseSchedule"],p=function getPermissionsAndProgresses(e,t,i){var s=new o.a("".concat(e,"~").concat(t,"~").concat(i)).addQueryParam("fields",f.join(",")).addQueryParam("includes",h.join(","));return r()(c.get(s.toString())).then(function(e){return{assignmentPermissions:n()(e.elements).first(),submissionProgresses:n()(e.linked[m]).first(),receivedReviewProgresses:n()(e.linked[d]).first(),displayablePhaseSchedules:n()(e.linked[l]).first()}})}},xGpl:function(module,exports,e){},xqV8:function(module,exports,e){}}]);
//# sourceMappingURL=76.f579d9aae97c8e327835.js.map